{% extends 'base.html' %}
{% block content %}
<h2>Agregar nueva cámara</h2>
<form method="post" id="cameraForm">
    {{ form.hidden_tag() }}
    <div class="mb-3">
        {{ form.name.label(class_='form-label') }}
        {{ form.name(class_='form-control', id='name') }}
    </div>
    <div class="mb-3">
        {{ form.type.label(class_='form-label') }}
        {{ form.type(class_='form-control', id='type', onchange='toggleFields()') }}
    </div>
    <div class="mb-3">
        {{ form.ip.label(class_='form-label') }}
        {{ form.ip(class_='form-control', id='ip') }}
    </div>
    <div class="mb-3">
        {{ form.port.label(class_='form-label') }}
        {{ form.port(class_='form-control', id='port') }}
    </div>
    <div class="mb-3">
        {{ form.username.label(class_='form-label') }}
        {{ form.username(class_='form-control', id='username') }}
    </div>
    <div class="mb-3">
        {{ form.password.label(class_='form-label') }}
        {{ form.password(class_='form-control', id='password') }}
    </div>
    <div class="mb-3" id="streamUrlDiv" style="display:none;">
        {{ form.stream_url.label(class_='form-label') }}
        {{ form.stream_url(class_='form-control', id='stream_url', placeholder='http://ip:puerto/stream o /snapshot.jpg') }}
        <small class="form-text text-muted">Ejemplo: http://192.168.1.100:8080/video</small>
    </div>
    <button type="submit" class="btn btn-success">Agregar cámara</button>
</form>

<script>
function toggleFields() {
    var type = document.getElementById('type').value;
    var streamDiv = document.getElementById('streamUrlDiv');
    if(type === 'DIRECT') {
        streamDiv.style.display = '';
    } else {
        streamDiv.style.display = 'none';
    }
}
document.addEventListener('DOMContentLoaded', toggleFields);
</script>
{% endblock %}
